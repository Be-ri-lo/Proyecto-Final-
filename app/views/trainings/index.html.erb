<h1 class="training">Entrenamientos</h1>
 
  <div class="col-xs-4 col-sm-2 col-md-2 right"> 
    <% if user_signed_in? == current_user %>
      <%= link_to 'New Training', new_training_path, class: "btn btn-info btn-sm rigth" %>  
    <% end %>  
  </div>

  <div id="trainings" class="row row-cols-1 row-cols-md-3 g-5 m-5" style="margin-top:20px">
    <% @trainings.reverse.each do |training| %> <!--reverse.each: da vuelta el orden... a,b,c sería c,b,a-->

      <div id="tr" class="col custom-shadow card-training" >
        <div class="card h-100 ">
          <% if training.images.any? %>
            <%= image_tag training.images.first.variant(resize: "535x535").processed %> <!--Chequear!!-->
          <% end %>
          <div class="card-body">
            <h5 class="card-title"><%= training.name %></h5>
          </div>
            <ul class="list-group list-group-flush card-body">
              <li class="list-group-item"><i class="icon ion-md-contact"></i> <%= training.user.name%></li>
              <li class="list-group-item"><i class="fas fa-running"></i> <%= training.sport %></li>
              <li class="list-group-item"><i class="fas fa-signal"></i> <%= training.level %></li>
              <li class="list-group-item"><i class="fas fa-street-view"></i> <%= training.place.location %></li>
              <li class="list-group-item"><i class="far fa-calendar-alt"></i> <%= training.date.strftime('%d-%m-%y / %H:%M') %></li>
            </ul>
          <div class="card-body">
            <!--Rated-->
            <% if user_signed_in?%>
              <a href="#" class="card-link">
                <%= link_to 'Mirar', training %>
                 <!--Este link es para pedir solicitud de entrenamiento--> 
                <tbody class="text-center">
                    <% if user_signed_in? %>
                         <%# <% if current_user.partners.pluck(:partner_id).include?(training.user.id) && user.id == training.user.id %>  
                        <%= link_to 'Entrenar', users_path(@user) %> <!--que vaya al dashboard del usuario dueño del entrenamiento-->      
                    <% else %>
                        <%= "¡Conectate para entrenar!" %>
                    <% end %>
                </tbody>
              </a>
              <td id='td-style'>
                <% if training.concluded? %>
                  <td><%=link_to 'Calificar', training %></td>
                <% end %></td>
                
                <%= training.average_stars.times do %>
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-star-fill" viewBox="0 0 16 16">
                      <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                    </svg>
                <% end %><br><br>
              
              <% if @training.user == current_user %>
                <a href="#" class="card-link">
                  <%= link_to 'Editar', edit_training_path(@training) %> |
                </a>
              <% end %> 
            <% end %>    
          </div>
        </div>
      </div>
    <% end %>  
  </div>

  <!--Paginación-->
  <section class="my-1">
    <div class="d-flex justify-content-end my-2">
      <%= link_to_previous_page @trainings, '<<', class: "text-decoration-none text-light btn btn-info btn-lg" %>
      <%= link_to_next_page @trainings, '>>', class: "text-decoration-none btn btn-info btn-lg text-light" %>
    </div>
  </section>

<%# 
<div style="width: 500px">
  <%= pie_chart @training_sport, legend: "bottom" %>
  <%# <%= line_chart @training_group, legend: ""%> 
<%# </div> %>